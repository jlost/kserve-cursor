---
description: Repository-specific fork details
alwaysApply: true
---

# Repository: kserve

## Fork Details

| Fork | Repository | Remote Name |
|------|------------|-------------|
| Upstream | kserve/kserve | `upstream` |
| ODH | opendatahub-io/kserve | `odh` |
| Downstream | red-hat-data-services/kserve | `downstream` |

## ODH Default Branch

`release-0.15` (tracks upstream releases)

## Reference Documentation

- Upstream contribution guide: `CONTRIBUTING.md`
- ODH docs: `docs/odh/`

---

# Detecting Target Fork

Before suggesting an environment or base branch, determine the target fork.

| Signal | Pattern | Target | Env |
|--------|---------|--------|-----|
| Branch | `RHOAIENG-*-odh-*` | ODH | CRC |
| Branch | `RHOAIENG-*` (no suffix) | Downstream | CRC |
| Branch | `rhoai-*`, `*-odh`, `odh-*` | ODH/Downstream | CRC |
| Branch | `master` | Upstream | Kind |
| Tracking | `upstream/*` | Upstream | Kind |
| Tracking | `odh/*` or `downstream/*` | ODH/Downstream | CRC |
| JIRA | `RHOAIENG-*` + rhoai-2.16/2.19/2.22 | Downstream direct | CRC |
| JIRA | `RHOAIENG-*` + rhoai-2.25 | ODH stable-2.x or Downstream | CRC |
| JIRA | `RHOAIENG-*` (generic) | ODH or Downstream | CRC |
| JIRA | `KSERVE-*` | Upstream | Kind |

Check tracking: `git rev-parse --abbrev-ref --symbolic-full-name @{u} 2>/dev/null`

If ambiguous, ask: "Which fork? (upstream/odh/downstream)"

---

# Fork Hierarchy

This project follows a three-tier fork hierarchy. Always consider this context when assisting with development tasks.

```
kserve/kserve (upstream)
    |
    v
opendatahub-io/kserve (ODH)
    |
    v
red-hat-data-services/kserve (downstream/RHOAI)
```

## Git Remote Naming Convention

When working with git commands or analyzing branches, expect these remote names:
- `upstream` -> kserve/kserve
- `odh` -> opendatahub-io/kserve
- `downstream` -> red-hat-data-services/kserve
- `origin` -> user's personal fork

## Branch Targeting Rules

When determining which branch to base work on:

| Change Type | Target Fork | Base Branch |
|-------------|-------------|-------------|
| Upstream feature/fix | upstream | `master` |
| ODH feature (latest) | odh | `release-0.15` or current release |
| ODH feature (older) | odh | `release-0.14`, etc. |
| Downstream-only change (latest) | downstream | `main` |
| Downstream-only change (older) | downstream | `rhoai-X.Y` |

### Branch Mapping Between Forks

| RHOAI Version | Upstream Branch | ODH Branch | Downstream Branch |
|---------------|-----------------|------------|-------------------|
| 3.x (latest)  | `master` | `release-0.15` | `main` |
| 2.25 (latest stable) | N/A | `stable-2.x` | `rhoai-2.25` |
| 2.16, 2.19, 2.22 (older EUS/stable) | N/A | N/A | `rhoai-2.Y` (direct) |

### ODH stable-2.x Sync Pattern

The ODH `stable-2.x` branch only feeds into the **latest** RHOAI 2.x release:

- **RHOAI 2.25**: Can use `stable-2.x` sync via devops CI actions
- **Older z-streams (2.16, 2.19, 2.22)**: Require direct PRs to `rhoai-2.Y` in downstream

For older RHOAI versions, there is no ODH intermediate branch - fixes go directly to the
downstream `red-hat-data-services/*` repository targeting the specific `rhoai-2.Y` branch.

Example workflow for RHOAI 2.16 CVE fix:
1. PR directly to `red-hat-data-services/odh-model-controller` branch `rhoai-2.16`
2. No ODH cherry-pick needed (2.16 has diverged from stable-2.x)

### Cherry-Pick Flow

**Changes flow: Upstream -> ODH -> Downstream**

To get a fix into RHOAI:
1. If applicable, first merge to upstream (`kserve/kserve`)
2. Cherry-pick to ODH (`opendatahub-io/kserve`)
3. Cherry-pick to downstream (`red-hat-data-services/kserve`)

For ODH-specific changes (OpenShift integration, etc.), start at ODH.

## Code Sync Patterns

When syncing code between forks:
1. Upstream releases trigger ODH release branch updates
2. ODH release branches sync to downstream
3. Cherry-picks flow: Upstream -> ODH -> Downstream

### RHOAI 2.x Z-Stream Workflow

Two distinct workflows exist for RHOAI 2.x fixes:

**Latest stable (2.25):**
- Fixes can flow through ODH `stable-2.x` branch
- Automated sync via devops CI actions

**Older z-streams (2.16, 2.19, 2.22 EUS):**
- Direct PRs to downstream `rhoai-2.Y` branches
- No ODH intermediate step required
- These branches have diverged from stable-2.x

When targeting a JIRA with "Affects Version" like `rhoai-2.16`:
1. Target `red-hat-data-services/{repo}` directly
2. Base branch: `rhoai-2.16`
3. Skip ODH cherry-pick

## Release / Process Workflows

For the full decision flow (new feature vs CVE, which repo/branch first, code freezes, RHOAI release inclusion, regular sync cadence), use the **model-serving-release-workflow** skill. In short:
- New feature: contribute upstream (kserve master) when possible; else ODH (kserve master or odh-model-controller incubating).
- CVE: follow red.ht/modelserving-cve-process.
- RHOAI release: Internal then Official Code Freeze; if past freeze, report to team and get approval, then cherry-pick/sync or wait for regular sync (ODH Release Process: red.ht/odh-model-process).
