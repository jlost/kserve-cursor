---
description: ODH two-tier fork hierarchy and branch targeting rules
alwaysApply: true
---

# ODH Fork Structure

This project follows a two-tier fork hierarchy (ODH-native, no upstream). Always consider this context when assisting with development tasks.

## Fork Hierarchy

```
opendatahub-io/odh-model-controller (ODH - origin)
    |
    v
red-hat-data-services/odh-model-controller (downstream/RHODS)
```

## Git Remote Naming Convention

When working with git commands or analyzing branches, expect these remote names:
- `odh` -> opendatahub-io/odh-model-controller
- `downstream` -> red-hat-data-services/odh-model-controller
- `origin` -> user's personal fork

## Branch Targeting Rules

When determining which branch to base work on:

| Change Type | Target Fork | Base Branch |
|-------------|-------------|-------------|
| ODH feature (latest) | odh | `master` |
| ODH feature (older) | odh | `release-vX.Y` or `stable-X.x` |
| Downstream-only change (latest) | downstream | `main` |
| Downstream-only change (older) | downstream | `rhoai-X.Y` |
| Backport from downstream | odh | `master` |

### Branch Mapping Between Forks

ODH and downstream branches correspond to specific RHOAI product versions:

| RHOAI Version | ODH Branch | Downstream Branch |
|---------------|------------|-------------------|
| 3.x (latest)  | `master`   | `main`            |
| 2.x (stable)  | `stable-2.x` or `release-vX.Y` | `rhoai-2.Y` |

### Cherry-Pick Flow

**Always go through ODH first.** Changes flow: ODH -> downstream.

To get a fix into a specific RHOAI version:
1. First merge to the corresponding ODH branch (e.g., `odh/stable-2.x` for RHOAI 2.25)
2. Then cherry-pick to the corresponding downstream branch (e.g., `downstream/rhoai-2.25`)

**Never target downstream directly** without first having the change in ODH.

## Code Sync Patterns

When syncing code between forks:
1. ODH release branches are cut from `master`
2. Cherry-picks flow: ODH -> downstream (always ODH first)
